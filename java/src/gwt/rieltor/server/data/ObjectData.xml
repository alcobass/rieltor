<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ObjectData">
	
	<resultMap id="result" type="ObjectData">
	    <result property="id" column="ID"/>
	    <result property="rooms" column="ROOMS"/>
	    <result property="area" column="AREA"/>
	    <result property="level" column="LEVEL"/>
	    <result property="porch" column="PORCH"/>
	    <result property="meters" column="METERS"/>
	    <association property="house" resultMap="houseResult"/>
	    <association property="objectType" javaType="ObjectType">
	    	<result property="id" column="ID"/>
	    	<result property="type" column="TYPE"/>
		</association>
		<association property="balcony" javaType="Balcony">
	    	<result property="id" column="ID"/>
	    	<result property="type" column="TYPE"/>
		</association>
		<association property="toilet" javaType="Toilet">
	    	<result property="id" column="ID"/>
	    	<result property="type" column="TYPE"/>
		</association>
		<association property="heat" javaType="Heat">
	    	<result property="id" column="ID"/>
	    	<result property="type" column="TYPE"/>
		</association>
		<association property="stove" javaType="Stove">
	    	<result property="id" column="ID"/>
	    	<result property="type" column="TYPE"/>
		</association>
		<association property="objectState" javaType="ObjectState">
	    	<result property="id" column="ID"/>
	    	<result property="type" column="TYPE"/>
		</association>
    </resultMap>
    
    <resultMap id="houseResult" type="House">
    	<result property="id" column="ID"/>	    
	    <result property="adress" column="ADRESS"/>
	    <result property="levels" column="LEVELS"/>
	    <result property="builtYear" column="BUILT_YEAR"/>
	    <result property="lastRepair" column="LAST_REPAIR"/>
	    <association property="region" javaType="Region">
	    	<result property="id" column="ID"/>
	    	<result property="region" column="REGION"/>
	    </association>
    </resultMap>
	
    <select id="getAll" resultMap="result">
    	SELECT o.ID, 
    	       o.ROOMS,
    	       o.AREA,
    	       o.LEVEL,
    	       o.PORCH,
    	       o.METERS,
    	       h.ID,
    	       h.ADRESS,
    	       h.LEVELS,
    	       h.BUILT_YEAR,
    	       h.LAST_REPAIR,
    	       r.ID,
    	       r.REGION, 
    	       ot.ID,
    	       ot.TYPE,
    	       b.ID,
    	       b.TYPE,
    	       t.ID,
    	       t.TYPE,
    	       ht.ID,
    	       ht.TYPE,
    	       s.ID,
    	       s.TYPE,
    	       os.ID,
    	       os.TYPE
    	  FROM OBJECT AS o
    	  LEFT OUTER JOIN HOUSE AS h ON o.HOUSE_ID = h.ID
    	  LEFT OUTER JOIN REGION AS r ON h.REGION_ID = r.ID
    	  LEFT OUTER JOIN OBJECT_TYPE AS ot ON o.OBJECT_TYPE_ID = ot.ID
    	  LEFT OUTER JOIN BALCONY AS b ON o.BALCONY_ID = b.ID
    	  LEFT OUTER JOIN TOILET AS t ON o.TOILET_ID = t.ID
    	  LEFT OUTER JOIN HEAT AS ht ON o.HEAT_ID = ht.ID
    	  LEFT OUTER JOIN STOVE AS s ON o.STOVE_ID = s.ID
    	  LEFT OUTER JOIN OBJECT_STATE AS os ON o.OBJECT_STATE_ID = os.ID;
    </select>
    
</mapper>